<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>unquote</title>
<meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
<link rel="shortcut icon" href="/dashboard/favicon.ico">
<link rel="stylesheet" href="/dashboard/bower_components/bootstrap/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="style.css">
<script src="/dashboard/app/elements/core9-core/js/core.js"></script>
<script src="/dashboard/app/elements/core9-core/js/iframe/parent.js"></script>
<script src="/dashboard/bower_components/json-editor/dist/jsoneditor.min.js"></script>
<script src="/dashboard/bower_components/webcomponentsjs/webcomponents-lite.min.js"></script>
<script src="/dashboard/bower_components/systemjs/dist/system.js"></script>
<script>
	System.baseURL = '/dashboard/';
</script>
<script src="/dashboard/app/elements/core9-router/js/router.js"></script>
<script>
	window.Polymer = window.Polymer || {};
	window.Polymer.dom = 'shadow';
</script>
<link rel="import" href="/dashboard/app/elements/elements.html">
<script src="/dashboard/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
<script type="text/javascript">
  Router.config({
    root : '/dashboard/',
    mode : 'history'
  });
</script>
<script>
	<!-- adding resources / panels -->

	var p = new Promise(function(resolve,reject){
		Core9.panel.add(['login','routes','files','forms','grid','fileeditor'], resolve); // order does matter
	});

	<!-- adding resources / panels -->
</script>
</head>
<body>

	<script>
	  // load menu in iframe needs to be in shadow root
     document.body
    .appendChild(Core9.panel
        .create(
            'panel-iframe-menu',
            999,
            'menu',
            'iframe',
            '/dashboard/app/elements/core9-menu/customsize/customsize.html',
            false));

	setTimeout(function() {
		p.then(function(msg){
			Object.keys(Core9.panel.__registry).forEach(function(key) {
			    var panel = Core9.panel.__registry[key];
			    if(panel.url){
			        document.body.appendChild(Core9.panel.create(panel.id, panel['z-index'],
			                panel.class, panel.type, panel.url,
			                true));
			              Core9.iframe.parent.sentMessageToIframe(Core9.panel.__registry[key].menu, document.getElementsByClassName('menu')[1]);
			    }
			});
			document.getElementsByClassName('menu')[1].style.visibility = "visible";
		});
	}, 1000); // big fat hack needs a callback from on iframe loaded


	</script>
</body>
</html>