<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>unquote</title>
	<meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
	<link rel="shortcut icon" href="/dashboard/favicon.ico">
	<link rel="stylesheet" href="/dashboard/bower_components/bootstrap/dist/css/bootstrap.min.css">
	<link rel="stylesheet" href="style.css">
	<script src="/dashboard/bower_components/jquery/dist/jquery.min.js"></script>
	<script src="/dashboard/bower_components/store-js/store.min.js"></script>
	<script src="/dashboard/bower_components/json-editor/dist/jsoneditor.min.js"></script>
	<script src="/dashboard/app/elements/core9-core/js/core.js"></script>
	<script src="/dashboard/app/elements/core9-core/js/iframe/parent.js"></script>
	<script src="/dashboard/bower_components/webcomponentsjs/webcomponents-lite.min.js"></script>
	<script src="/dashboard/bower_components/systemjs/dist/system.js"></script>




	<script>
		if (location.pathname == "/dashboard") {
			location.pathname = "/dashboard/"
		}
		store.set('username', 'easydrain');
		store.set('account', 'easydrain');

		System.baseURL = '/dashboard/';
		var initPanelIframeSite = true;
		var initPanelThemes = true;
		var initPanelpages = true;
	</script>
	<script src="/dashboard/app/elements/core9-core/js/core-router.js"></script>
	<script>
		window.Polymer = window.Polymer || {};
		window.Polymer.dom = 'shadow';
	</script>
	<link rel="import" href="/dashboard/app/elements/elements.html">
	<script src="/dashboard/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

	<script type="text/javascript">
		Router.config({
			root: '/dashboard/',
			mode: 'history'
		});
	</script>
	<script>
		<!-- adding resources .. panels -->
		//Core9.panellist = ['routes', 'editor', 'themes', 'pages', 'nide']; //,'login'
		//Core9.panellist = ['routes', 'editor', 'themes', 'pages', 'formbuilder', 'nide', 'styleguide'];
		if (store.get('login') == 'true') {
			Core9.panellist = ['routes', 'editor', 'themes', 'pages', 'nide', 'blockpreview'];
		} else {
			//Core9.panellist = ['routes', 'login', 'editor', 'themes', 'pages', 'nide', 'blockpreview'];
			Core9.panellist = ['routes', 'editor', 'themes', 'pages', 'blockpreview'];
		}

		// to enble files and media uploading Core9.panellist = ['routes','editor','themes','pages','media','nide'];
		// to enable login Core9.panellist = ['routes','themes','pages','media','nide','editor','login'];
		var p = new Promise(function(resolve, reject) {
			Core9.panel.add(Core9.panellist, resolve); // order does matter
		});

		<!-- adding resources / panels -->
	</script>

	<style>
		#modal-form {
			cursor: move;
			position: relative;
			/* important (all position that's not `static`) */
			_resize: both;
			_overflow: auto;
		}

		.modal-header .close {
			margin-top: -9px;
		}

		::-webkit-scrollbar {
			width: 20px;
		}

		::-webkit-scrollbar-thumb {
			background-color: rgba(255, 255, 255, 255);
		}

		.modal-backdrop {
			opacity: 0.1 !important;
		}

		#mini-menu {
			background: #336ca6;
			padding: 20px;
			width: 150px;
			position: absolute;
			margin-top: -70px;
			height: 70px;
			margin-right: 50px;
			z-index: 9999;
			right: 20px;
			display: none;
		}

		#mini-menu > div {
			width: 20px;
			height: 20px;
			background: #336ca6;
			position: relative;
			bottom: -27px;
			left: -20px;
			display: none;
		}

		button#export-page {
			color: #333;
			text-decoration: none;
			line-height: 100%;
			white-space: nowrap;
			display: inline-block;
			position: relative;
			vertical-align: middle;
			margin: 0 2px 5px 0;
			background-color: #ececec;
			border: solid 1px #b8b8b9;
		}

		.ajax-container {
			height: 100vh;
			width: 100vw;
			font-family: Helvetica;
			z-index: 9999;
			display: none;
			position: absolute;
			background-color: #fff;
		}

		.loader {
			height: 20px;
			width: 250px;
			position: absolute;
			top: 0;
			bottom: 0;
			left: 0;
			right: 0;
			margin: auto;
		}

		.loader--dot {
			animation-name: loader;
			animation-timing-function: ease-in-out;
			animation-duration: 3s;
			animation-iteration-count: infinite;
			height: 20px;
			width: 20px;
			border-radius: 100%;
			background-color: black;
			position: absolute;
			border: 2px solid white;
		}

		.loader--dot:first-child {
			background-color: #8cc759;
			animation-delay: 0.5s;
		}

		.loader--dot:nth-child(2) {
			background-color: #8c6daf;
			animation-delay: 0.4s;
		}

		.loader--dot:nth-child(3) {
			background-color: #ef5d74;
			animation-delay: 0.3s;
		}

		.loader--dot:nth-child(4) {
			background-color: #f9a74b;
			animation-delay: 0.2s;
		}

		.loader--dot:nth-child(5) {
			background-color: #60beeb;
			animation-delay: 0.1s;
		}

		.loader--dot:nth-child(6) {
			background-color: #fbef5a;
			animation-delay: 0s;
		}

		.loader--text {
			position: absolute;
			top: 200%;
			left: 0;
			right: 0;
			width: 4rem;
			margin: auto;
		}

		.loader--text:after {
			content: "Loading";
			font-weight: bold;
			animation-name: loading-text;
			animation-duration: 3s;
			animation-iteration-count: infinite;
		}

		@keyframes loader {
			15% {
				transform: translateX(0);
			}
			45% {
				transform: translateX(230px);
			}
			65% {
				transform: translateX(230px);
			}
			95% {
				transform: translateX(0);
			}
		}

		@keyframes loading-text {
			0% {
				content: "Loading";
			}
			25% {
				content: "Loading.";
			}
			50% {
				content: "Loading..";
			}
			75% {
				content: "Loading...";
			}
		}
	</style>

</head>

<body>
	<script>
		/**
												window.addEventListener("iframeLoadedEvent", function(event){
													console.log(event);
												}, false);
												**/
	</script>
	<div id="mini-menu">
		<button id="export-page">export</button>
		<div></div>
	</div>


	<div class='ajax-container'>
		<div class='loader'>
			<div class='loader--dot'></div>
			<div class='loader--dot'></div>
			<div class='loader--dot'></div>
			<div class='loader--dot'></div>
			<div class='loader--dot'></div>
			<div class='loader--dot'></div>
			<div class='loader--text'></div>
		</div>
	</div>

	<script>
		window.addEventListener("hideAjaxLoader", function(event) {
			$('.ajax-container').fadeOut();
			//console.log('ok need to hide loader');
			//console.log(event);
		}, false);
		window.addEventListener("showAjaxLoader", function(event) {
			$('#mini-menu').hide();
			$('#mini-menu > div').hide();
			$('.ajax-container').fadeIn();
			//console.log('ok need to show loader');
			//console.log(event);
		}, false);
	</script>
	<script>
		$(document).ready(function() {
			function miniHandlerIn() {
				$('#mini-menu').css('margin-top', '0px');
			}

			function miniHandlerOut() {
				$('#mini-menu').css('margin-top', '-70px');
			}

			function divHandlerIn() {
				$('#mini-menu').css('margin-top', '0px');
			}

			function divHandlerOut() {}
			$('#mini-menu').hover(miniHandlerIn, miniHandlerOut);
			$('#mini-menu > div').hover(divHandlerIn, divHandlerOut);
		});
		window.addEventListener('urlchange', function(e) {
			var url = e.detail[2];
			var parser = document.createElement('a');
			parser.href = url;
			var path = parser.pathname;
			if (path == '/dashboard/page/edit') {

				window.addEventListener("hideAjaxLoader", function(event) {
					$('#mini-menu').fadeIn();
					$('#mini-menu > div').fadeIn();
				}, false);

				//document.getElementById('mini-menu').style.display = 'block';
				//document.querySelector('#mini-menu > div').style.display = 'block';
			} else {
				document.getElementById('mini-menu').style.display = 'none';
				document.querySelector('#mini-menu > div').style.display = 'none';
			}
		}, false);
	</script>



	<!-- modal test -->
	<!-- Trigger the modal with a button -->
	<button style="visibility:hidden;" id="page-form" type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Open Modal</button>

	<!-- Modal -->
	<div id="myModal" class="modal fade" role="dialog">
		<div class="modal-dialog">

			<!-- Modal content-->
			<div id="modal-form" class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h4 class="modal-title"></h4>
				</div>
				<div class="modal-body">

					<div id="form-container" style="width:100%;background:transparent;overflow: hidden; min-height:400px; height: 400px; resize:vertical; overflow:auto;">
						<style>
							iframe#iframe-form-holder {
								width: 100%;
								vheight: 100%;
								border: none;
							}
						</style>
						<iframe id="iframe-form-holder" src="/dashboard/panels/forms/form.html" height="100%"></iframe>â€‹
					</div>
				</div>
				<div class="modal-footer">
					<button id="modal-form-close-button" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				</div>
			</div>

		</div>
	</div>
	<!-- modal test -->






	<script src="/dashboard/app/elements/core9-core/js/core-blocks-menu.js"></script>
	<script src="/dashboard/app/elements/core9-core/js/core-blocks-export.js"></script>
	<script src="/dashboard/app/elements/core9-core/js/core-blocks-forms-drag.js"></script>
</body>

</html>
