<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>unquote</title>
	<meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
	<link rel="shortcut icon" href="/dashboard/favicon.ico">
	<link rel="stylesheet" href="/dashboard/bower_components/bootstrap/dist/css/bootstrap.min.css">
	<link rel="stylesheet" href="style.css">
	<script src="/dashboard/bower_components/store-js/store.min.js"></script>
	<script src="/dashboard/bower_components/json-editor/dist/jsoneditor.min.js"></script>
	<script src="/dashboard/app/elements/core9-core/js/core.js"></script>
	<script src="/dashboard/app/elements/core9-core/js/iframe/parent.js"></script>
	<script src="/dashboard/bower_components/webcomponentsjs/webcomponents-lite.min.js"></script>
	<script src="/dashboard/bower_components/systemjs/dist/system.js"></script>

	<script>
		if (location.pathname == "/dashboard") {
			location.pathname = "/dashboard/"
		}
		store.set('username', 'easydrain');
		store.set('account', 'easydrain');

		System.baseURL = '/dashboard/';
		var initPanelIframeSite = true;
		var initPanelThemes = true;
		var initPanelpages = true;
	</script>
	<script src="/dashboard/app/elements/core9-core/js/core-router.js"></script>
	<script>
		window.Polymer = window.Polymer || {};
		window.Polymer.dom = 'shadow';
	</script>
	<link rel="import" href="/dashboard/app/elements/elements.html">
	<script src="/dashboard/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
	<script type="text/javascript">
		Router.config({
			root: '/dashboard/',
			mode: 'history'
		});
	</script>
	<script>
		<!-- adding resources .. panels -->
		Core9.panellist = ['routes', 'editor', 'themes', 'pages', 'nide']; //,'login'
		// to enble files and media uploading Core9.panellist = ['routes','editor','themes','pages','media','nide'];
		// to enable login Core9.panellist = ['routes','themes','pages','media','nide','editor','login'];
		var p = new Promise(function(resolve, reject) {
			Core9.panel.add(Core9.panellist, resolve); // order does matter
		});

		<!-- adding resources / panels -->
	</script>
</head>

<body>


	<!-- modal test -->
	<!-- Trigger the modal with a button -->
	<button style="visibility:hidden;" id="page-form" type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Open Modal</button>

	<!-- Modal -->
	<div id="myModal" class="modal fade" role="dialog">
		<div class="modal-dialog">

			<!-- Modal content-->
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h4 class="modal-title">Modal Header</h4>
				</div>
				<div class="modal-body">

					<div id="form-container" style="width:100%;background:transparent;overflow: hidden;height:800px;">
						<style>
							iframe#iframe-form-holder {
								width: 100%;
								height: 100%;
								border: none;
							}
						</style>
						<iframe id="iframe-form-holder" src="/dashboard/panels/forms/form.html" height="100%"></iframe>â€‹
					</div>

				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				</div>
			</div>

		</div>
	</div>
	<!-- modal test -->


	<script>
		// load menu in iframe needs to be in shadow root
		document.body
			.appendChild(Core9.panel
				.create(
					'panel-iframe-menu',
					999,
					'menu',
					'iframe',
					'/dashboard/app/elements/core9-menu/customsize/customsize.html',
					false));

		setTimeout(function() {
			p.then(function(msg) {
				Object.keys(Core9.panel.__registry).forEach(function(key) {
					var panel = Core9.panel.__registry[key];
					if (panel.url) {
						document.body.appendChild(Core9.panel.create(panel.id, panel['z-index'],
							panel.class, panel.type, panel.url,
							true));
						Core9.iframe.parent.sentMessageToIframe(Core9.panel.__registry[key].menu, document.getElementsByClassName('menu')[1]);
					}
				});
				setTimeout(function() {
					//document.getElementById('panel-iframe-menu').style.display = "none";
					//Core9.panel.open('panel-login');
				}, 1000);
				document.getElementsByClassName('menu')[1].style.visibility = "visible";
			});

		}, 1500); // big fat hack needs a callback from on iframe loaded
	</script>
	<script>
		//window.onload = addListeners();

		function addListeners() {
			document.getElementById('myModal').addEventListener('mousedown', mouseDown, false);
			window.addEventListener('mouseup', mouseUp, false);

		}

		function mouseUp() {
			window.removeEventListener('mousemove', divMove, true);
		}

		function mouseDown(e) {
			window.addEventListener('mousemove', divMove, true);
		}

		function divMove(e) {
			var div = document.getElementById('myModal');
			div.style.position = 'absolute';
			div.style.top = e.clientY + 'px';
			div.style.left = e.clientX + 'px';
		}
	</script>
</body>

</html>
