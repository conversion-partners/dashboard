<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>unquote</title>
<meta name="viewport"
	content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
<link rel="shortcut icon" href="/dashboard/favicon.ico">
<link rel="stylesheet"
	href="/dashboard/bower_components/bootstrap/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="style.css">
<script src="/dashboard/app/elements/core9-core/js/core.js"></script>
<script src="/dashboard/app/elements/core9-core/js/iframe/parent.js"></script>
<script
	src="/dashboard/bower_components/json-editor/dist/jsoneditor.min.js"></script>
<script
	src="/dashboard/bower_components/webcomponentsjs/webcomponents-lite.min.js"></script>
<script src="/dashboard/bower_components/systemjs/dist/system.js"></script>
<script>
	System.baseURL = '/dashboard/';
</script>
<script src="/dashboard/app/elements/core9-router/js/router.js"></script>
<script>
	window.Polymer = window.Polymer || {};
	window.Polymer.dom = 'shadow';
</script>
<link rel="import" href="/dashboard/app/elements/elements.html">
<script
	src="/dashboard/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
	
<script>
	<!-- adding resources / panels -->
	
	var p = new Promise(function(resolve,reject){
		Core9.panel.add(['fileeditor'], resolve);
	});
	
	<!-- adding resources / panels -->
</script>	
<script type="text/javascript">
	Router.config({
		root : '/dashboard/',
		mode : 'history'
	});
	var routes = {
		'/home$/' : function() {
			console.log('home', arguments);
		},
		'/devices$/' : function() {
			console.log('hitting device...');
			document.querySelector('#panel-content > div.panelbutton').click();
		},
		'/blocks$/' : function() {
			console.log('hitting panel-files...');
			document.querySelector('#panel-files > div.panelbutton').click();
		},
		'/settings/setup$/' : function() {
			console.log('settings/setup', arguments);
		},
		'/forms$/' : function() {
			console.log('forms', arguments);
		},
		'/pages$/' : function(req) {
			console.log('files', arguments);
		},
		'/files$/' : function(req) {
			console.log('files', arguments);
		}
	}
	Router.addRoutes(routes).listen();
	
	var routes = {
			'default' : function() {
				console.log('hitting default...');
			}
		}
	Router.addRoutes(routes).listen();

	//history.pushState(null, null, "products/edit/test");
</script>
<style>
core9-filemanager {
	width: 60%;
	left: 20%;
	position: relative;
}
</style>
</head>
<body>

	<script>
		document.body.appendChild(Core9.panel.create('panel-iframe-site', -1,
				'fullbleed', 'iframe',
				'/dashboard/panels/grid/grid-example.html', false));
		document.body.appendChild(Core9.panel.create('panel-content', 1, '',
				'div', '/dashboard/panels/files/list.html', true));
		document.body.appendChild(Core9.panel.create('panel-form', 5,
				'nocolour', 'div', '/dashboard/panels/forms/form.html', true));
		
		


		
		
		document.body.appendChild(Core9.panel.create('panel-login', 1005,
				'fullbleed', 'iframe', '/dashboard/panels/login/index.html',
				true));
		document.body
				.appendChild(Core9.panel
						.create(
								'panel-iframe-menu',
								999,
								'menu',
								'iframe',
								'/dashboard/app/elements/core9-menu/customsize/customsize.html',
								false));
	</script>
	<script>

		var message;
		p.then(function(msg){
			console.log("panel loaded.. " + msg);
			console.log(Core9.panel.__registry['fileeditor']);
			message = Core9.panel.__registry['fileeditor'].menu;
			console.log(Core9.panel.__registry);
			
			Object.keys(Core9.panel.__registry).forEach(function(key) {
			    console.log(key, Core9.panel.__registry[key]);
			    var panel = Core9.panel.__registry[key];
				document.body.appendChild(Core9.panel.create(panel.id, panel['z-index'],
						panel.class, panel.type, panel.url,
						true));
			    
			});

			
		});

		
		setTimeout(function() {
			var iframe = document.getElementsByClassName('menu')[1];
			Core9.iframe.parent.sentMessageToIframe(message, iframe);
		}, 1000);
		
/* 		window.addEventListener('iframeLoadedEvent', function(e) {
			if (e.detail.classes == "menu") {
				alert('hi menu');
			}
		}, false); */
	</script>
</body>
</html>