<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="/dashboard/bower_components/systemjs/dist/system.js"></script>
</head>
<body>
<script>
Core9 = {}
Core9.system = {
		unwrapModule : function(mod) {
			for (key in mod) {
				if (mod.hasOwnProperty(key)) {
					var value = mod[key];
					return value;
				}
			}
		},
		multiImport : function(modules) {
			return Promise.all(modules.map(function(m) {

				return System.import(m)
			}))
		}
	}
System.config({
    baseURL: '/dashboard/'
  });
</script>


<script>

var init = function(modules){
	
	var db = Core9.system.unwrapModule(modules[0])
	
	var DB = db.getDB();
	
	var collections = DB.getCollections(function(){
		if (this.readyState==4 && this.status==200)
	    {
	    	console.log(this.responseText);
	    }
		console.log(this);
	});
	
	//console.log(collections);
}

</script>



<script>

Core9.system.multiImport(['app/elements/core9-core/js/core-db','bower_components/superagent/lib/client']).then(
		function(modules) {
			init(modules);
		});

</script>
</body>
</html>